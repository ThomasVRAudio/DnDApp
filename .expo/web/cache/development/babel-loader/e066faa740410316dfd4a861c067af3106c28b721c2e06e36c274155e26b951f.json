{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Colors from \"../../styles/Colors\";\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\nimport { database } from \"../database\";\nimport { GetProficiencyBonusAsync } from \"../../helper\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar SavingThrows = function SavingThrows(props) {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    linkedData = _useState2[0],\n    setLinkedData = _useState2[1];\n  var _useState3 = useState(0),\n    _useState4 = _slicedToArray(_useState3, 2),\n    proficiencyBonus = _useState4[0],\n    setProficiencyBonus = _useState4[1];\n  var onPressHandler = function onPressHandler(save) {\n    database.UpdateTable(\"SavingThrows\", save.name, \"status\", save.status === 1 ? 0 : 1);\n    fetchData();\n  };\n  var fetchData = function () {\n    var _ref = _asyncToGenerator(function* () {\n      try {\n        var savingData = yield database.GetData(\"SavingThrows\");\n        var modData = yield database.GetData(\"Modifiers\");\n        linkData(modData, savingData);\n        var profBonus = yield GetProficiencyBonusAsync();\n        setProficiencyBonus(profBonus);\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n      }\n    });\n    return function fetchData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    fetchData();\n  }, [, props.modifiersChanged, props.levelChanged]);\n  var linkData = function linkData(modData, saveData) {\n    var _saveData$map;\n    var newLinkedData = (_saveData$map = saveData == null ? void 0 : saveData.map(function (obj) {\n      var _modData$find;\n      return {\n        name: obj.name,\n        modifier: modData == null ? void 0 : (_modData$find = modData.find(function (mod) {\n          return mod.name === obj.name;\n        })) == null ? void 0 : _modData$find.amount,\n        status: obj.status\n      };\n    })) != null ? _saveData$map : [];\n    setLinkedData(newLinkedData);\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(View, {\n      children: _jsx(Text, {\n        style: styles.title,\n        children: \"Saving Throws\"\n      })\n    }), _jsx(View, {\n      style: styles.rows,\n      children: linkedData == null ? void 0 : linkedData.map(function (data, index) {\n        var _data$modifier, _data$modifier2, _data$modifier3, _data$modifier4, _data$modifier5, _data$modifier6;\n        return _jsxs(View, {\n          style: styles.row,\n          children: [_jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return onPressHandler(data);\n            },\n            children: _jsx(Ionicons, {\n              style: styles.button,\n              name: data.status ? \"radio-button-on\" : \"radio-button-off\",\n              size: 20\n            })\n          }), _jsxs(View, {\n            style: styles.alignRight,\n            children: [_jsx(Text, {\n              style: styles.name,\n              children: data.name\n            }), _jsx(Text, {\n              style: styles.modifier,\n              children: data.status === 1 ? `${proficiencyBonus + Math.floor((((_data$modifier = data.modifier) != null ? _data$modifier : 0) - 10) / 2) >= 0 ? `+${proficiencyBonus + Math.floor((((_data$modifier2 = data.modifier) != null ? _data$modifier2 : 0) - 10) / 2)}` : `${proficiencyBonus + Math.floor((((_data$modifier3 = data.modifier) != null ? _data$modifier3 : 0) - 10) / 2)}`}` : `${Math.floor((((_data$modifier4 = data.modifier) != null ? _data$modifier4 : 0) - 10) / 2) >= 0 ? `+${Math.floor((((_data$modifier5 = data.modifier) != null ? _data$modifier5 : 0) - 10) / 2)}` : `${Math.floor((((_data$modifier6 = data.modifier) != null ? _data$modifier6 : 0) - 10) / 2)}`}`\n            })]\n          })]\n        }, index);\n      })\n    })]\n  });\n};\nexport default SavingThrows;\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: Colors.secundary,\n    flexDirection: \"column\",\n    borderRadius: 12,\n    paddingVertical: 12,\n    width: 230,\n    margin: 5,\n    height: \"90%\",\n    alignItems: \"center\"\n  },\n  title: {\n    fontFamily: \"Bold\",\n    fontSize: 22,\n    color: Colors.Darkest,\n    textAlign: \"center\",\n    paddingBottom: 10\n  },\n  row: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    flex: 1\n  },\n  button: {\n    flex: 1\n  },\n  name: {\n    color: Colors.Darkest,\n    fontFamily: \"Bold\",\n    fontSize: 14,\n    marginRight: 15\n  },\n  modifier: {\n    color: Colors.primary,\n    fontFamily: \"Regular\",\n    fontSize: 14\n  },\n  rows: {\n    flexDirection: \"column\",\n    flex: 1,\n    width: \"80%\",\n    justifyContent: \"space-between\"\n  },\n  alignRight: {\n    flexDirection: \"row\",\n    flex: 2,\n    justifyContent: \"flex-end\"\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","View","Text","StyleSheet","TouchableOpacity","Colors","Ionicons","database","GetProficiencyBonusAsync","jsx","_jsx","jsxs","_jsxs","SavingThrows","props","_useState","_useState2","_slicedToArray","linkedData","setLinkedData","_useState3","_useState4","proficiencyBonus","setProficiencyBonus","onPressHandler","save","UpdateTable","name","status","fetchData","_ref","_asyncToGenerator","savingData","GetData","modData","linkData","profBonus","error","console","apply","arguments","modifiersChanged","levelChanged","saveData","_saveData$map","newLinkedData","map","obj","_modData$find","modifier","find","mod","amount","style","styles","container","children","title","rows","data","index","_data$modifier","_data$modifier2","_data$modifier3","_data$modifier4","_data$modifier5","_data$modifier6","row","onPress","button","size","alignRight","Math","floor","create","backgroundColor","secundary","flexDirection","borderRadius","paddingVertical","width","margin","height","alignItems","fontFamily","fontSize","color","Darkest","textAlign","paddingBottom","justifyContent","flex","marginRight","primary"],"sources":["D:/Users/Thomas/Documents/Programming Projects/Mobile/DnD App/DnDApp3/DnDApp/components/StatScreen/SavingThrows.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { View, Text, StyleSheet, TouchableOpacity } from \"react-native\";\r\nimport Colors from \"../../styles/Colors\";\r\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\r\n\r\nimport { ModifierData, SavingThrowData } from \"../DataInterfaces\";\r\nimport { database } from \"../database\";\r\nimport { GetProficiencyBonusAsync } from \"../../helper\";\r\n\r\ninterface LinkedData {\r\n  name: string;\r\n  modifier?: number;\r\n  status: number;\r\n}\r\n\r\ninterface Props {\r\n  modifiersChanged: boolean;\r\n  levelChanged: boolean;\r\n}\r\n\r\nconst SavingThrows = (props: Props) => {\r\n  const [linkedData, setLinkedData] = useState<LinkedData[] | null>(null);\r\n  const [proficiencyBonus, setProficiencyBonus] = useState<number>(0);\r\n\r\n  const onPressHandler = (save: SavingThrowData) => {\r\n    database.UpdateTable(\r\n      \"SavingThrows\",\r\n      save.name,\r\n      \"status\",\r\n      save.status === 1 ? 0 : 1\r\n    );\r\n    fetchData();\r\n  };\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const savingData = await database.GetData<SavingThrowData>(\r\n        \"SavingThrows\"\r\n      );\r\n      const modData = await database.GetData<ModifierData>(\"Modifiers\");\r\n\r\n      linkData(modData, savingData);\r\n      let profBonus = await GetProficiencyBonusAsync();\r\n      setProficiencyBonus(profBonus);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [, props.modifiersChanged, props.levelChanged]);\r\n\r\n  const linkData = (\r\n    modData: ModifierData[] | null,\r\n    saveData: SavingThrowData[] | null\r\n  ): void => {\r\n    const newLinkedData: LinkedData[] =\r\n      saveData?.map((obj) => ({\r\n        name: obj.name,\r\n        modifier: modData?.find((mod) => mod.name === obj.name)?.amount,\r\n        status: obj.status,\r\n      })) ?? [];\r\n\r\n    setLinkedData(newLinkedData);\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View>\r\n        <Text style={styles.title}>Saving Throws</Text>\r\n      </View>\r\n      <View style={styles.rows}>\r\n        {linkedData?.map((data, index) => (\r\n          <View style={styles.row} key={index}>\r\n            <TouchableOpacity onPress={() => onPressHandler(data)}>\r\n              <Ionicons\r\n                style={styles.button}\r\n                name={data.status ? \"radio-button-on\" : \"radio-button-off\"}\r\n                size={20}\r\n              />\r\n            </TouchableOpacity>\r\n            <View style={styles.alignRight}>\r\n              <Text style={styles.name}>{data.name}</Text>\r\n              <Text style={styles.modifier}>\r\n                {data.status === 1\r\n                  ? `${\r\n                      proficiencyBonus +\r\n                        Math.floor(((data.modifier ?? 0) - 10) / 2) >=\r\n                      0\r\n                        ? `+${\r\n                            proficiencyBonus +\r\n                            Math.floor(((data.modifier ?? 0) - 10) / 2)\r\n                          }`\r\n                        : `${\r\n                            proficiencyBonus +\r\n                            Math.floor(((data.modifier ?? 0) - 10) / 2)\r\n                          }`\r\n                    }`\r\n                  : `${\r\n                      Math.floor(((data.modifier ?? 0) - 10) / 2) >= 0\r\n                        ? `+${Math.floor(((data.modifier ?? 0) - 10) / 2)}`\r\n                        : `${Math.floor(((data.modifier ?? 0) - 10) / 2)}`\r\n                    }`}\r\n              </Text>\r\n            </View>\r\n          </View>\r\n        ))}\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default SavingThrows;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    backgroundColor: Colors.secundary,\r\n    flexDirection: \"column\",\r\n    borderRadius: 12,\r\n    paddingVertical: 12,\r\n    width: 230,\r\n    margin: 5,\r\n    height: \"90%\",\r\n    alignItems: \"center\",\r\n  },\r\n  title: {\r\n    fontFamily: \"Bold\",\r\n    fontSize: 22,\r\n    color: Colors.Darkest,\r\n    textAlign: \"center\",\r\n    paddingBottom: 10,\r\n  },\r\n  row: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    flex: 1,\r\n  },\r\n  button: {\r\n    flex: 1,\r\n  },\r\n  name: {\r\n    color: Colors.Darkest,\r\n    fontFamily: \"Bold\",\r\n    fontSize: 14,\r\n    marginRight: 15,\r\n  },\r\n  modifier: {\r\n    color: Colors.primary,\r\n    fontFamily: \"Regular\",\r\n    fontSize: 14,\r\n  },\r\n  rows: {\r\n    flexDirection: \"column\",\r\n    flex: 1,\r\n    width: \"80%\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  alignRight: {\r\n    flexDirection: \"row\",\r\n    flex: 2,\r\n    justifyContent: \"flex-end\",\r\n  },\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}